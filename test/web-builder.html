<!--This file was automatically generated by {flock}-->
<!--Although it looks tempting to edit this, don't, for your own sake-->
<html><head><title>Swarm Web Builder</title><style>body {
			color: #eeeeee;
			background-color: #111111;
			font-family: sans-serif;
			padding: 50px;
		}
		textarea, p {
			width: 100%;
			padding: 20px;
			background-color: rgba(255,255,255,0.1);
			color: white;
			border: 2px solid rgba(255,255,255,0.1);
			border-radius: 5px;
			box-sizing: border-box;
		}</style></head><body><script>
		function build(root, included, userSource) {
    function shouldInclude(dependents) {
        for (const dependant of dependents){
            if (included.includes(dependant)) {
                return true;
            }
        }
        return false;
    }
    function buildModule(module) {
        let o = '';
        o += `((async()=>{`;
        o += `const base = await((async()=>{`;
        o += module.javascript;
        o += `})());`;
        for(const subModule in module.subNodes){
            if (shouldInclude(module.subNodes[subModule].dependents)) {
                o += `base.${subModule} = await ${buildModule(module.subNodes[subModule])};`;
            }
        }
        o += 'return base;';
        o += `})())`;
        return o;
    }
    return `void ((async()=>{window.swarm = await ${buildModule(root)};(async ()=>{${userSource}})()})())`;
};

		window.onload = () => {
			setInterval(()=>{
				const dependencies = document.querySelector("#input").value.split("\n");
				const userSource = document.querySelector("#src").value;

				const output = build({"dependents":["swarm","swarm.eleven","swarm.thirteen"],"javascript":"return { twelve:12 };","subNodes":{"eleven":{"dependents":["swarm.eleven","swarm.thirteen"],"javascript":"return 11;","subNodes":{},"name":"swarm.eleven"},"thirteen":{"dependents":["swarm.thirteen"],"javascript":"return { getThirteen() { return swarm.eleven+2; } };","subNodes":{},"name":"swarm.thirteen"}},"name":"swarm"},dependencies,userSource);
			
				const outputPanel = document.querySelector("#output");

				if (outputPanel.innerText != output) {
					outputPanel.innerText = output;
				}
			});
		}</script><h1>Swarm Web Builder</h1><h2>Dependencies</h2><textarea id="input">
swarm
swarm.ui
</textarea><h2>Your code</h2><textarea id="src">alert("this is my really cool app")</textarea><h2>Generated output</h2><p id="output"></p></body></html>